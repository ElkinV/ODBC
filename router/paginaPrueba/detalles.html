<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <title>pagina</title>
    <link rel="stylesheet" type="text/css" href="estilos.css">
</head>
<body>
  <nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top sticky-top">
    <div class="container-fluid d-flex align-items-center">
      <a class="navbar-brand d-flex align-items-center" href="#">
        <img src="" id="logo" class="img-fluid my-auto">
        <h1 class="my-auto">DETALLES</h1>
      </a>
      <button class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="offcanvasNavbarLabel">DETALLES</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="index.html">Inicio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="">Usuario</a>
            </li>
            <li class="nav-item">
              <button class="btn btn-primary">
                <i class="fas fa-cog"></i> Configuración
              </button>              
            </li>
          </ul>
        </div>
      </div>
    </div>
  </nav>
      <div class="container-fluid">
        <div class="row p-5">
            <div class="col-xs-12 col-md-4 col-lg-4 mx-auto">
              <canvas id="miGrafica"></canvas>
              <script src="grafica.js"></script>
            </div>
            <div class="col-xs-12 col-md-6 col-lg-6 mx-auto" id="datax">
              <div class="row">
                <div class="col-xs-4 col-md-12 col-lg-12">
                  <h2>Sensores</h2>
                </div>
              </div>
            </div>
        </div>
      </div>

  <script>
    // Realizar la petición a la API
    fetch('http://192.168.1.10:8000/api/v1/parametros/id=1')
      .then(response => response.json())
      .then(data => {
        // Obtener el contenedor donde se mostrará la información
        const container = document.getElementById('datax');

        // Recorrer los datos recibidos de la API
        data.forEach(item => {
          // Crear una tarjeta para cada elemento
          const card = document.createElement('div');
          card.classList.add('card');

          // Crear el contenido de la tarjeta
          const title = document.createElement('h2');
          title.textContent = item.nombre_parametro;

          const description = document.createElement('p');
          description.textContent = item.valor;

          // Agregar los elementos a la tarjeta
          card.appendChild(title);
          card.appendChild(description);

          // Agregar un controlador de eventos clic a la tarjeta
          card.addEventListener('click', () => {
            // Redirigir a otra página al hacer clic en la tarjeta
            window.location.href = 'detalles.html';
          });

          // Agregar la tarjeta al contenedor principal
          container.appendChild(card);
        });
      })
      .catch(error => console.error(error));
  </script>       
</body>
</html>